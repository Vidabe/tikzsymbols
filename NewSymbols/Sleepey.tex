% !TEX encoding = UTF-8 Unicode
\documentclass[naustrian]{scrartcl}

\usepackage{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{xparse}
\usepackage{tikzsymbols}
\usepackage{amsfonts}

\usetikzlibrary{shapes.geometric}

\ExplSyntaxOn
\makeatletter
\cs_new:Npn \@@_create_draftbox:nn #1#2
  {
    \group_begin: 
    \vbadness=\c_max_dim
    \fp_set:Nn \l_tmpa_fp {#1}
    \fp_set:Nn \l_tmpb_fp {#2}
    \frame
      {
        \vbox_to_ht:nn { \fp_to_dim:N \l_tmpb_fp } 
          {
            \hbox_to_wd:nn { \fp_to_dim:N \l_tmpa_fp } { }
          }
      }
    \group_end: 
  }



\NewDocumentCommand { \testSleepey } { O{1} O{none} O{none} O{black} }
  {
    \begin{tikzpicture}
      [ x=2.04ex, y=2.04ex, line ~ width=0.102ex* #1 , scale=#1 ]
        %% Hat
        \filldraw [fill=#3]
          (-0.33,0) arc[start~angle=180,end~angle=0,x~radius=0.45,y~radius=0.4] 
          -- ++(0,-0.2) 
          arc[start~angle=0,end~angle=130,x~radius=0.15,y~radius=0.24];
        %% face
        \filldraw [fill=#2,rounded ~ corners=0.001ex * #1]
          (0.33,0)  arc[start~angle=0, end~angle=-180, radius=0.33] -- cycle ;
        %% Pommel
        \fill (0.55,-0.15) circle [radius=0.06];
        \foreach \l_@@_angle_tl in {0,30,60,...,360}
          {
            \draw ({0.55+0.06*cos(\l_@@_angle_tl)*1.2},{-0.15+0.06*sin(\l_@@_angle_tl)*1.2}) 
              circle[radius=0.02];
          }
        %% Stars
        \foreach \l_tmpa_tl/\l_tmpb_tl in { -0.14/0.12 , 0.19/0.12 , 0.05/0.26 , 0.40/0.16 }
          {
            \draw [line~width=0.04ex* #1,#4]
            \foreach \l_@@_angle_tl in { 0,45,90,...,360 }
              {
                (\l_tmpa_tl,\l_tmpb_tl) -- ({\l_tmpa_tl+0.07*cos(\l_@@_angle_tl)},
                {\l_tmpb_tl+0.07*sin(\l_@@_angle_tl)})
              }
            ;
          }
        %% Mouth
        \fill (0,-0.225) circle [radius=0.04];
        %% Eyes
        \draw (-0.1,-0.09)  arc[start~angle=0, end~angle=-180,
          x~radius=0.06,y~radius=0.08] ;
        \draw (0.1,-0.09)  arc[start~angle=180, 
          end~angle=360,x~radius=0.06,y~radius=0.08] ;
    \end{tikzpicture}
  }

\NewDocumentCommand { \testdSleepey } { O{1} O{yellow} O{blue} O{black} }
  {
    \begin{tikzpicture}
      [ x=2.04ex, y=2.04ex, line ~ width=0.102ex* #1 , scale=#1 ]
        %% Hat
        \shade [ball ~ color=#3]
          (-0.33,0) arc[start~angle=180,end~angle=0,x~radius=0.45,y~radius=0.4] 
          -- ++(0,-0.2) 
          arc[start~angle=0,end~angle=130,x~radius=0.15,y~radius=0.24];
        %% face
        \shade [ball ~ color=#2,rounded ~ corners=0.001ex * #1]
          (0.33,0)  arc[start~angle=0, end~angle=-180, radius=0.33] -- cycle ;
        %% Pommel
        \fill (0.55,-0.15) circle [radius=0.06];
        \foreach \l_@@_angle_tl in {0,30,60,...,360}
          {
            \draw ({0.55+0.06*cos(\l_@@_angle_tl)*1.2},{-0.15+0.06*sin(\l_@@_angle_tl)*1.2}) 
              circle[radius=0.02];
          }
        %% Stars
        \foreach \l_tmpa_tl/\l_tmpb_tl in { -0.14/0.12 , 0.19/0.12 , 0.05/0.26 , 0.40/0.16 }
          {
            \draw [line~width=0.04ex* #1,#4]
            \foreach \l_@@_angle_tl in { 0,45,90,...,360 }
              {
                (\l_tmpa_tl,\l_tmpb_tl) -- ({\l_tmpa_tl+0.07*cos(\l_@@_angle_tl)},
                {\l_tmpb_tl+0.07*sin(\l_@@_angle_tl)})
              }
            ;
          }
        %% Mouth
        \fill (0,-0.225) circle [radius=0.04];
        %% Eyes
        \draw (-0.1,-0.09)  arc[start~angle=0, end~angle=-180,
          x~radius=0.06,y~radius=0.08] ;
        \draw (0.1,-0.09)  arc[start~angle=180, 
          end~angle=360,x~radius=0.06,y~radius=0.08] ;
    \end{tikzpicture}
  }

\NewDocumentCommand { \testdraftSleepey } { O{1} }
  {
    \@@_create_draftbox:nn
      { 2.084866ex * #1 }
      { 1.5912ex * #1 }
  }

\NewDocumentCommand { \testddraftSleepey } { O{1} }
  {
    \@@_create_draftbox:nn
      { 2.033865ex * #1 }
      { 1.489181ex * #1 }
  }



\ExplSyntaxOff

\begin{document}

X\testSleepey[10][white][blue][yellow!95!black] x 

X\testdSleepey[1]x%[white][blue][yellow!95!black] x 
X\testSleepey\testdSleepey x%[white][blue][yellow!95!black] x 


\Nudelholz[-10]
\end{document}

